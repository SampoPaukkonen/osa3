(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(11),o=t.n(u),c=t(12),i=t(2),l=t(3),m=t.n(l),s="/api/persons",d=function(e,n){return console.log("Update pyynt\xf6 l\xe4htee osoitteeseen: ","".concat(s,"/").concat(e)),m.a.put("".concat(s,"/").concat(e),n).then(function(e){return e.data})},f=function(e){return m.a.post(s,e).then(function(e){return e.data})},g=function(e){return m.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})},h=function(e){var n=e.person,t=e.group,u=e.setGroup,o=e.messager,c=Object(a.useState)(n),l=Object(i.a)(c,1)[0];return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{type:"button",onClick:function(){var e="Poistetaanko ".concat(l.name,"?");window.confirm(e)&&(function(e,n,t){g(l._id).then(t(n.filter(function(n){return n._id!==e._id})))}(l,t,u),o("Henkil\xf6 ".concat(l.name," poistettu onnistuneesti")))}},"poista"))},p=function(e){var n=e.persons,t=e.setPersons,a=e.messager;return r.a.createElement("div",null,r.a.createElement("p",null,n.map(function(e){return r.a.createElement(h,{key:e.name,person:e,group:n,setGroup:t,messager:a})})),r.a.createElement("p",null,"T\xe4\xe4ll\xe4 tapahtuu kummallisuuksia"))},b=function(e){var n=e.newName,t=e.handleNameChange;return r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:n,onChange:t}))},v=function(e){var n=e.newNumber,t=e.handleNumberChange;return r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:n,onChange:t}))},E=function(e){var n=e.addContact,t=e.newName,a=e.handleNameChange,u=e.newNumber,o=e.handleNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement(b,{newName:t,handleNameChange:a}),r.a.createElement(v,{newNumber:u,handleNumberChange:o}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},j=function(e){var n=e.targetName,t=e.handleTargetChange;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:n,onChange:t}))},N=function(e){var n=e.message;if(n)return r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},n);return r.a.createElement("div",null)},w=function(e){var n=e.message;if(n)return r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},n);return r.a.createElement("div",null)},C=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1];Object(a.useEffect)(function(){m.a.get("/api/persons").then(function(e){u(e.data)})},[]);var o=Object(a.useState)(""),l=Object(i.a)(o,2),s=l[0],g=l[1],h=Object(a.useState)(""),b=Object(i.a)(h,2),v=b[0],C=b[1],O=Object(a.useState)(""),k=Object(i.a)(O,2),y=k[0],S=k[1],T=Object(a.useState)(""),_=Object(i.a)(T,2),H=_[0],P=_[1],B=Object(a.useState)(""),z=Object(i.a)(B,2),G=z[0],J=z[1],R=function(e){J("".concat(e)),setTimeout(function(){J("")},3e3)},x=function(e){P("".concat(e)),setTimeout(function(){J("")},3e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(N,{message:G}),r.a.createElement(w,{message:H}),r.a.createElement(j,{targetName:y,handleTargetChange:function(e){S(e.target.value)}}),r.a.createElement("h2",null,"lis\xe4\xe4 uusi"),r.a.createElement(E,{addContact:function(e){if(e.preventDefault(),t.map(function(e){return e.name}).includes(s)){var n="".concat(s," on jo luettelossa, korvataanko vanha numero uudella?"),a=window.confirm(n),r=t.filter(function(e){return e.name===s})[0];if(a){var o=Object(c.a)({},r,{number:v});d(o._id,o).then(function(e){u(t.map(function(n){return n._id===r._id?e:n})),R("Henkil\xf6 ".concat(r.name," p\xe4ivitetty onnistuneesti"))}).catch(function(e){x("Henkil\xf6 ".concat(r.name," oli jo poistettu"))})}}else f({name:s,number:v}).then(function(e){u(t.concat(e)),R("Henkil\xf6 ".concat(s," lis\xe4tty onnistunesti"))}).catch(function(e){console.log("T\xe4m\xe4 on frontendin saama virhe: ",e),console.log("T\xe4m\xe4 on frontendin saama virheviesti: ",e.response.data.error),x(e.response.data.error)}),g(""),C("")},newName:s,handleNameChange:function(e){g(e.target.value)},newNumber:v,handleNumberChange:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"Numerot"),r.a.createElement(p,{persons:function(e){return e?t.filter(function(n){return n.name.includes(e)}):t}(y),setPersons:u,messager:R}))};o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.bd431e88.chunk.js.map